<!DOCTYPE html>
<html lang="en">

<head>
    {% block head %}
    <meta charset="utf-8">
    <meta name="color-scheme" content="dark light">
    <title>luchetti.dev</title>
    <link rel="stylesheet" href="{{get_url(path="fonts.css", trailing_slash=false)}}">
    <link rel="stylesheet" href="{{get_url(path="tachyons.css", trailing_slash=false)}}">
    {% endblock %}
</head>


<body class="flex justify-center pa1">
    <main class="w-95 flex flex-column items-center">
        <header class="w-two-thirds-ns w-80-m w-90 flex flex-column items-center justify-center">
            <h1 class="mv2">
                <a class="link dim fw8" href="/">luchetti.dev</a>
            </h1>
            <ul class="w-80 w-40-ns pl0 flex flex-row-ns list justify-around">
                <li>
                    {% set blog = get_section(path="blog/_index.md", lang=lang, metadata_only=true) %}
                    <a class="link dim fw7 f3 text" href="{{blog.path}}">
                        {{blog.title}}
                    </a>
                </li>
                <li><a class="fw4 f3 text">.</a></li>
                <li>
                    {% set now = get_section(path="now/_index.md", lang=lang, metadata_only=true) %}
                    <a class="link dim fw7 f3 text" href="{{now.path}}">
                        {{now.title}}
                    </a>
                </li>
            </ul>
        </header>
        <div class="w-two-thirds-l w-90-m w-95 bt bb pv1 ph2">
            {% block content %}
            {% endblock %}
        </div>
        <footer class="pv2 w-two-thirds-ns w-80-m w-90">
            {% block footer %}
            <div>
                <div class="fl w-50 pa2 flex flex-column justify-between br">
                    <a class="link text f5-ns f4 fw4 mb1">reach me at:</a>
                    <div class="flex flex-row items-center justify-between">
                        <i class="nf nf-oct-mail dim f2-ns f3" href="mailto:gustavo@luchetti.dev"></i>
                        <i class="nf nf-dev-github_alt dim f2-ns f3" href="https://github.com/gusluchetti"></i>
                        <i class="nf nf-fa-linkedin_square dim f2-ns f3" href="https://www.linkedin.com/in/gustaluchetti/"></i>
                    </div>
                </div>
                <div class="fl w-50 pa2 flex flex-column justify-between">
                    <label class="text theme-switch" for="theme">
                        theme: <input id="theme" type="checkbox">
                    </label>
                    <label class="text lang-switch" for"lang">
                        lang: <input id="lang" type="select">
                    </label>
                </div>
            </div>
            {% endblock %}
        </footer>

    <script>
        const btn = document.querySelector(".theme-switch input");
        const prefersDarkScheme = window.matchMedia("(prefers-color-scheme: dark)");
        const currentTheme = localStorage.getItem("theme");

        if (currentTheme == "dark") {
          document.body.classList.toggle("dark-theme");
        } else if (currentTheme == "light") {
          document.body.classList.toggle("light-theme");
        }

        btn.addEventListener("click", function () {
          if (prefersDarkScheme.matches) {
            document.body.classList.toggle("light-theme");
            var theme = document.body.classList.contains("light-theme")
              ? "light"
              : "dark";
          } else {
            document.body.classList.toggle("dark-theme");
            var theme = document.body.classList.contains("dark-theme")
              ? "dark"
              : "light";
          }

          localStorage.setItem("theme", theme);
        });
    </script>
    </main>
</body>

</html>
